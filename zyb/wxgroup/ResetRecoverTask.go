package wxgroup

import (
	"fmt"
	"net/http"
	"strings"
)

func ResetRecoverTask() {
	groupIds := "10808316873646014,10950810348134240,10745615037513292,10831032525986606,10754827676803194,10795660198766780,10760972610218001,10901411093968383,10702091085771548,10934879598810888,10829733280760324,10879511283901018,10775433131687822,10918908569014654,10706107461863145,10941662544957659,10943832259110390,10732358755489476,10776114381305493,10710309642161558,10735559312209756,10816865941756191,10797632345616792,10851036743341276,10845102314271990,10844219709932568,10732422900682462,10904903092703689,10708915031630502,10739562223427096,10802270212255700,10750051537638659,10815409192816725,10966306269918943,10721222520699244,10828763538843431,10874033614668727,10953725491724552,10840571086430664,10761376687658169,10931342445861541,10721417395070658,10867260912653812,10836543821220437,10878534422193111,10901337771372564,10765831881268167,10952387140023142,10893741790573534,10781226652076339,10884976795016727,10856445942906686,10841244866155547,10931084326703918,10852188118121090,10749654415692359,10819878090493475,10972879834130359,10774108608679176,10785835702905645,10940358645780394,10853951908077418,10728054554362710,10812082690995823,10706852432479054,10708693698255556,10915742908521749,10816321919807556,10781774673747406,10922303733838460,10756350414548888,10708647388432097,10806479530183962,10770660573461551,10725959428632281,10881964335566950,10792016849307324,10875639801059655,10886767601588035,10700098671229509,10798104377061551,10949776514830133,10901683811886532,10837670583200569,10926917027871661,10789729844268291,10808295884758424,10924307976799629,10908503887733865,10872753332897648,10801229164462494,10707346411658536,10729010740788256,10818823011667336,10919571511288166,10934939357709632,10860630530356287,10763153230290422,10797122932219557,10702755551199280,10739867442212721,10878600101750235,10750955497923072,10872955347151708,10696182001007794,10856349788562720,10724135178423123,10925782034248216,10887594780393474,10854204746116583,10963204863024350,10948622118109576,10843417541668938,10907990828057075,10861397495109431,10977291880291247,10939733649978730,10767219035105387,10776170697110150,10740044383637042,10960110901676049,10891833859270747,10938866858243383,10787429403762127,10899366263503563,10973714148629249,10842953429174758,10720071623764458,10932621697537542,10969192037747404,10821190742786205,10952676745476934,10875150897844074,10761514269755629,10754065004528431,10898275197373197,10797247085048078,10806420390208459,10826600835625355,10888134674437260,10738784316330079,10720986659259257,10896433215536962,10804736172910597,10831179452726423,10811324781310960,10718585513062582,10854224611078759,10707353880088606,10820684075435607,10894805985305305,10818310740920308,10868345648310013,10859483164762129,10819632703447856,10960130508923512"
	groupIdList := strings.Split(groupIds, ",")
	for _, groupId := range groupIdList {
		resetRecoverTask(groupId)
	}

}

func resetRecoverTask(groupId string) {
	url := "https://wxtools.zuoyebang.cc/wxqk-go/tools/resetrecovergrouptask?wxGroupId=" + groupId

	// 创建 HTTP 请求
	req, err := http.NewRequest("GET", url, nil)
	if err != nil {
		fmt.Println("创建请求失败:", err)
		return
	}

	// 设置请求头
	req.Header.Set("accept", "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7")
	req.Header.Set("accept-language", "zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7")
	req.Header.Set("cache-control", "no-cache")
	req.Header.Set("cookie", "RANGERS_WEB_ID=6430599a-1243-4e7d-9d30-4de92cf0df82; RANGERS_SAMPLE=0.07367398890598964; uid=zhangxueren; ZYBIPSCAS=IPS_1d59147c193f2fc2a3e3909dae0dca171715597013; Hm_lvt_c33960c712441eec1b994580263ccb1a=1715756176; Hm_lpvt_c33960c712441eec1b994580263ccb1a=1716189999; ZYBUSS=PwzWvo3l9NUKJIBEqGfFWPG56knpG0J71FHfn_eZZ5eDC8qqgojR-vJLf_QVeWqq")
	req.Header.Set("pragma", "no-cache")
	req.Header.Set("priority", "u=0, i")
	req.Header.Set("sec-ch-ua", "\"Google Chrome\";v=\"125\", \"Chromium\";v=\"125\", \"Not.A/Brand\";v=\"24\"")
	req.Header.Set("sec-ch-ua-mobile", "?0")
	req.Header.Set("sec-ch-ua-platform", "\"macOS\"")
	req.Header.Set("sec-fetch-dest", "document")
	req.Header.Set("sec-fetch-mode", "navigate")
	req.Header.Set("sec-fetch-site", "none")
	req.Header.Set("sec-fetch-user", "?1")
	req.Header.Set("upgrade-insecure-requests", "1")
	req.Header.Set("user-agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36")

	// 发送 HTTP 请求
	client := &http.Client{}
	resp, err := client.Do(req)
	if err != nil {
		fmt.Println("发送请求失败:", err)
		return
	}
	defer resp.Body.Close()

	// 输出响应结果
	fmt.Println("resetRecoverTask groupId:", groupId, " response status:", resp.Status)
}
